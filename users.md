Чтобы создать нового пользователя в Linux, можно воспользоваться утилитами командной строки, такими как **useradd** или **adduser**. Ниже приведены основные способы:

### 1. Использование команды **useradd**

1. **Создание пользователя и домашнего каталога**
   Выполните команду с правами суперпользователя (root или через sudo):
   ```
   sudo useradd -m имя_пользователя
   ```
   Параметр `-m` гарантирует, что для нового пользователя будет создан домашний каталог (обычно `/home/имя_пользователя`).

2. **Установка пароля**
   После создания учетной записи задайте пароль:
   ```
   sudo passwd имя_пользователя
   ```
   Введите пароль дважды, когда система его запросит.

3. **Дополнительные опции**
   - **Указание оболочки:**
     Если нужно задать определённую оболочку (например, bash), можно использовать опцию `-s`:
     ```
     sudo useradd -m -s /bin/bash имя_пользователя
     ```
   - **Задание комментария (обычно полное имя пользователя):**
     ```
     sudo useradd -m -c "Полное имя пользователя" имя_пользователя
     ```

### 2. Использование команды **adduser**

На некоторых дистрибутивах (например, Debian и Ubuntu) имеется более удобная утилита **adduser**, которая предлагает интерактивный режим для создания пользователя:
```
sudo adduser имя_пользователя
```
Эта команда последовательно запросит ввод пароля, информации о пользователе (например, полное имя, номер комнаты и т.д.) и автоматически создаст домашний каталог.

### Дополнительные моменты

- **Права суперпользователя:** Все вышеперечисленные команды требуют прав администратора, поэтому используйте `sudo` или выполните их от имени пользователя root.
- **Управление группами:** Если нужно добавить пользователя в определённые группы, можно использовать команду `usermod` после создания пользователя или указать опции в команде `useradd` (например, `-G group1,group2`).

Эти методы являются стандартными для большинства систем на базе Linux. Для более детальной информации можно обратиться к страницам руководства (например, `man useradd` или `man adduser`).

Сообщение

```
[sudo] password for vps_user:
vps_user is not in the sudoers file.
```

указывает на то, что пользователь **vps_user** не имеет прав для выполнения команд через sudo, то есть его либо нет в файле sudoers, либо он не входит в группу, которая имеет соответствующие привилегии (например, группу «sudo» в Ubuntu).

Чтобы исправить эту ситуацию, необходимо выполнить следующие шаги:

### 1. Получите доступ к учетной записи с правами суперпользователя

- **Если у вас есть пароль root:**
  Попробуйте войти в систему под root, выполнив:
  ```
  su -
  ```
  и введите пароль root.

- **Если root недоступен (как в Ubuntu, где root по умолчанию заблокирован):**
  Вам понадобится войти через другого пользователя с правами sudo или получить доступ к системе через консоль/режим восстановления.

### 2. Добавьте пользователя в группу с правами sudo

В большинстве дистрибутивов, таких как Ubuntu, достаточно добавить пользователя в группу **sudo**. Выполните команду от имени root (или другого пользователя с нужными привилегиями):

```
usermod -aG sudo vps_user
```

Параметр `-aG` означает «append to group» – то есть добавить пользователя в указанную группу, не удаляя его из других групп.

*Если вы используете другой дистрибутив (например, CentOS), в нём обычно используется группа **wheel** для sudo-пользователей, тогда команда будет выглядеть так:*

```
usermod -aG wheel vps_user
```

### 3. Проверьте группу пользователя

Чтобы убедиться, что пользователь теперь входит в нужную группу, выполните:

```
id vps_user
```

В выводе должна присутствовать группа **sudo** (или **wheel** в зависимости от дистрибутива).

### 4. Перезапустите сеанс

После внесения изменений выйдите из текущей сессии и выполните повторный вход, чтобы новые настройки вступили в силу.

### 5. Проверьте работу sudo

Теперь попробуйте выполнить любую команду с sudo, например:

```
sudo ls
```

Если всё сделано правильно, система запросит пароль для vps_user, и после его ввода команда выполнится без ошибки.

---

**Примечание:** Если у вас нет доступа к учетной записи с привилегиями (например, root или другому sudo-пользователю), то изменить настройки sudo самостоятельно не получится – в этом случае обратитесь к администратору сервера.

Данные рекомендации основаны на общепринятых методах управления правами в Linux (см. citeturn0search3, citeturn0search7).
